{
  "id": "level-008-trap-maze",
  "version": 1,
  "$schema": "https://labyrinth-leap.com/schemas/level-v1.json",
  "metadata": {
    "name": "Trap Maze",
    "difficulty": "hard",
    "estimatedTime": 360,
    "tags": ["handcrafted", "traps", "danger"],
    "description": "Navigate carefully - one wrong step could end your journey"
  },
  "generation": {
    "type": "handcrafted",
    "layout": {
      "cells": [
        [{"walls": 12, "type": "floor"}, {"walls": 8, "type": "floor"}, {"walls": 8, "type": "floor"}, {"walls": 8, "type": "floor"}, {"walls": 8, "type": "floor"}, {"walls": 10, "type": "floor"}],
        [{"walls": 4, "type": "start"}, {"walls": 0, "type": "floor"}, {"walls": 9, "type": "special", "properties": {"trap": "spike"}}, {"walls": 1, "type": "floor"}, {"walls": 0, "type": "floor"}, {"walls": 2, "type": "floor"}],
        [{"walls": 4, "type": "floor"}, {"walls": 1, "type": "floor"}, {"walls": 1, "type": "floor"}, {"walls": 9, "type": "special", "properties": {"trap": "pit"}}, {"walls": 1, "type": "floor"}, {"walls": 2, "type": "floor"}],
        [{"walls": 4, "type": "floor"}, {"walls": 0, "type": "floor"}, {"walls": 0, "type": "floor"}, {"walls": 0, "type": "floor"}, {"walls": 9, "type": "special", "properties": {"trap": "fire"}}, {"walls": 2, "type": "floor"}],
        [{"walls": 4, "type": "floor"}, {"walls": 1, "type": "floor"}, {"walls": 9, "type": "special", "properties": {"safe": true}}, {"walls": 1, "type": "floor"}, {"walls": 1, "type": "floor"}, {"walls": 2, "type": "floor"}],
        [{"walls": 6, "type": "floor"}, {"walls": 1, "type": "floor"}, {"walls": 1, "type": "floor"}, {"walls": 1, "type": "floor"}, {"walls": 1, "type": "floor"}, {"walls": 3, "type": "goal"}]
      ],
      "startPosition": {"x": 0, "y": 1},
      "goalPosition": {"x": 5, "y": 5},
      "orbPositions": [
        {"x": 2, "y": 4, "value": 50, "id": "safe-orb"},
        {"x": 4, "y": 1, "value": 100, "id": "risky-orb"},
        {"x": 1, "y": 3, "value": 75, "id": "bonus-orb"}
      ],
      "powerupPositions": [
        {"x": 3, "y": 4, "type": "trap_immunity", "id": "immunity-1"}
      ],
      "specialCells": [
        {"x": 2, "y": 1, "type": "trap", "properties": {"damage": 1, "type": "spike"}},
        {"x": 3, "y": 2, "type": "trap", "properties": {"damage": 2, "type": "pit"}},
        {"x": 4, "y": 3, "type": "trap", "properties": {"damage": 1, "type": "fire"}},
        {"x": 2, "y": 4, "type": "safe_zone", "properties": {"healing": true}}
      ]
    }
  },
  "config": {
    "boardSize": {"width": 6, "height": 6},
    "objectives": [
      {
        "id": "survive-and-escape",
        "type": "reach_goal",
        "target": 1,
        "description": "Reach the exit without triggering fatal traps",
        "required": true,
        "priority": 1
      },
      {
        "id": "avoid-all-traps",
        "type": "avoid_traps",
        "target": 0,
        "description": "Complete without triggering any traps",
        "required": false,
        "priority": 2
      },
      {
        "id": "collect-risky-orb",
        "type": "collect_orbs",
        "target": 1,
        "description": "Collect the high-value orb near the fire trap",
        "required": false,
        "priority": 3,
        "conditions": {
          "specificOrbs": ["risky-orb"]
        }
      }
    ],
    "constraints": [
      {
        "id": "one-way-paths",
        "type": "one_way_paths",
        "value": 1,
        "description": "Some paths can only be traversed once",
        "severity": "failure"
      }
    ],
    "powerups": [
      {
        "type": "trap_immunity",
        "spawnRate": 0.0,
        "duration": 10,
        "effect": "Immunity to all traps",
        "stackable": false
      }
    ],
    "startingInventory": [
      {
        "type": "health_potion",
        "quantity": 1
      }
    ]
  },
  "progression": {
    "starThresholds": [
      {
        "stars": 1,
        "requirements": {}
      },
      {
        "stars": 2,
        "requirements": {
          "constraintsViolated": 0
        }
      },
      {
        "stars": 3,
        "requirements": {
          "constraintsViolated": 0,
          "orbsCollected": 2,
          "objectivesCompleted": ["avoid-all-traps"]
        }
      }
    ],
    "rewards": [
      {
        "type": "coins",
        "value": 750,
        "description": "Danger survival bonus"
      },
      {
        "type": "achievement",
        "value": 1,
        "description": "Trap Master",
        "id": "trap_master"
      },
      {
        "type": "unlock",
        "value": 1,
        "description": "Trap immunity powerup unlocked",
        "id": "trap_immunity"
      }
    ],
    "unlocks": ["level-009-speed-demon"]
  }
}